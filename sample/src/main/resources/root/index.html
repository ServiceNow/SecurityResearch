<!--
  ~ Copyright (c) 2024 ServiceNow, Inc.
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy
  ~ of this software and associated documentation files (the "Software"), to deal
  ~ in the Software without restriction, including without limitation the rights
  ~ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  ~ copies of the Software, and to permit persons to whom the Software is
  ~ furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice (including the next paragraph)
  ~ shall be included in all copies or substantial portions of the Software.
  ~
  ~ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  ~ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  ~ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  ~ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  ~ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  ~ THE SOFTWARE.
-->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script type="text/javascript">
      function sendCode() {
        var code = $("#code").val();
        $("#output").load("/rhino", {"code": code});
      }
      function importData() {
        let input = document.createElement('input');
        input.type = 'file';
        input.onchange = _ => {
          // you can use this method to get file and perform respective operations
          let files = Array.from(input.files);
          const reader = new FileReader();
          reader.addEventListener('load', (event) => {
            $('#code').val(event.target.result);
          });
          reader.readAsText(files[0]);
          //fetch(files[0])
          //  .then((res) => res.text())
          //  .then((text) => {
          //    $('#code').val(text);
          //  }).catch((e) => console.error(e));
        };
        input.click();
      }
    </script>
    <title>Rhino Demo</title>
  </head>

  <body>
    <h1 style="text-align: center;">Rhino Demo</h1>
    <h4 style="text-align: left; margin-bottom: 0px;">Output Text:</h4>
    <pre id="output" style="border: 1px solid black; display: block; padding: 5px; width: 100%; max-width: 100%; min-width: 600px; height: auto; min-height: 25px; margin-bottom: 16px; margin-top: 4px; box-sizing: border-box;"></pre>
    <h4 style="text-align: left; margin-bottom: 0px; margin-top: 0px;">Input Script:</h4>
    <textarea id="code" style="border: 1px solid black; display: block; padding: 5px; width: 100%; max-width: 100%; min-width: 600px; height: auto; min-height: 300px; margin-bottom: 16px; margin-top: 4px; resize: none; box-sizing: border-box;"></textarea>
    <input type="button" value="Submit" onclick="sendCode();" />
    <button onclick="importData()">Import File</button>
  </body>
</html>
